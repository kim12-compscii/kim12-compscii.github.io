<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mental Health</title>
  <link rel="stylesheet" href="heyday.css" />
</head>
<body>
  <div class="phone">
    <div class="screen mh-bg">

      <div class="mh-header">
        <a class="back" href="heyday.html">‚Üê</a>
        <h1 class="mh-title">Mental Health</h1>

        <div class="bell" aria-label="notifications">
          üîî
          <span class="dot"></span>
        </div>
      </div>

      <div class="chart-wrap">
        <div class="y-axis">
          <span>8</span>
          <span>6</span>
          <span>4</span>
          <span>2</span>
          <span>0</span>
        </div>

        <div class="chart">
          <div class="gridline g1"></div>
          <div class="gridline g2"></div>
          <div class="gridline g3"></div>

          <div class="bars">
            <button class="bar-col week-btn" data-week="1" type="button">
              <div class="bar" id="bar1"></div>
              <div class="label">Week 1</div>
            </button>

            <button class="bar-col week-btn" data-week="2" type="button">
              <div class="bar" id="bar2"></div>
              <div class="label">Week 2</div>
            </button>

            <button class="bar-col week-btn" data-week="3" type="button">
              <div class="bar" id="bar3"></div>
              <div class="label">Week 3</div>
            </button>

            <button class="bar-col week-btn" data-week="4" type="button">
              <div class="bar" id="bar4"></div>
              <div class="label">Week 4</div>
            </button>
          </div>
        </div>
      </div>

      <div class="tips-title">Some tips:</div>

      <div class="tips-row">
        <div class="henry-face">
          <div class="plant small">
            <div class="leaf"></div>
            <div class="pot">:)</div>
          </div>
        </div>

        <div class="bubble" id="tipText">
          Tap a week to enter your weekly screen time (hours).
        </div>
      </div>

      <button class="big-btn" type="button">Parental controls</button>

      <script>
        // weekly hours stored in browser
        let hours = JSON.parse(localStorage.getItem("weeklyHours") || "[16,12,8,14]");

        // chart sizing
        const MAX_HOURS = 24;     // change if you want (example: 40)
        const MAX_BAR_PX = 220;   // tallest bar height

        function hoursToHeight(h) {
          const clamped = Math.max(0, Math.min(h, MAX_HOURS));
          return (clamped / MAX_HOURS) * MAX_BAR_PX;
        }

        // 8 possible tip replies
        function getTip(h) {
          if (h < 3)  return "Amazing! Very low screen time. Keep doing hobbies, sports, and sleep well üòä";
          if (h < 6)  return "Nice balance. Keep it up! Try taking a 5-minute break each hour.";
          if (h < 9)  return "Pretty good. Try a 'no phone during homework' rule for better focus.";
          if (h < 12) return "Getting higher. Turn off notifications for social apps while studying.";
          if (h < 15) return "High this week. Set a daily limit and stop screens 30 min before bed.";
          if (h < 18) return "Very high. Schedule screen-free blocks (30‚Äì60 mins) for homework.";
          if (h < 21) return "Super high. Consider deleting your biggest time-waster app for a week.";
          return "Extremely high. Talk with a parent/guardian about stronger limits & healthier routines.";
        }

        function renderBars() {
          for (let i = 1; i <= 4; i++) {
            document.getElementById("bar" + i).style.height =
              hoursToHeight(hours[i - 1]) + "px";
          }
        }

        renderBars();

        document.querySelectorAll(".week-btn").forEach(btn => {
          btn.addEventListener("click", () => {
            const week = Number(btn.dataset.week);
            const current = hours[week - 1];

            const input = prompt(
              `Week ${week}: How many HOURS of screen time did you have this week?\nExample: 12.5`,
              current
            );

            if (input === null) return;

            const value = Number(input);
            if (Number.isNaN(value) || value < 0) {
              alert("Please enter a valid number (0 or higher).");
              return;
            }

            hours[week - 1] = value;
            localStorage.setItem("weeklyHours", JSON.stringify(hours));

            renderBars();

            document.getElementById("tipText").innerText =
              `Week ${week}: ${value} hours\n\n` + getTip(value);
          });
        });
      </script>

    </div>
  </div>
</body>
</html>
